# Синтаксический разбор

### 1. Разбор последовательностей диапазонов страниц

Дана строка, содержащая последовательность диапазонов страниц либо отдельных страниц, разделенную запятыми.
Например: `1, 4-6, 9 , 10-15`.
Требуется преобразовать строку в массив пар $(a, b)$, где $a$-$b$ -- диапазон страниц (если $a = b$, то указана одна страница).

Процедура разбора состоит из двух этапов:

* лексический разбор -- строка преобразуется в последовательность лексем: чисел, дефисов, запятых;
* синтаксический разбор -- последовательность лексем преобразуется в искомый массив.

#### Разбор строки

На этапе лексического разбора последовательность символов преобразуется в последовательность элементов
таких типов: число, запятая, дефис. 

Далее происходит синтаксический разбор.
Считаем, что обработчик на каждом шаге разбора находится в одном из нескольких состояний.
Состояние определяет поведение обработчика при считывании очередного символа, а именно, в какое состояние будет
произведен переход и какая функция для преобразования символов в другие данные будет вызвана.

Выделим следующие состояния обработчика (конечного детерминированного автомата):
* S - стартовое состояние, либо после запятой
* N - число после запятой либо в начале строки
* N- - число с дефисом
* N-N - число после дефиса

Автомат работает так:

(S, число) -> N

(S, ,) -> ошибка: лишняя запятая

(S, -) -> ошибка: лишний дефис

(N, число) -> ошибка: два числа разделены пробелами

(N, -) -> N-

(N, ,) -> S + вызов процедуры добавления нового диапазона в массив

(N-, число) -> N-N

(N-, -) -> ошибка: два дефиса подряд

(N-, ,) -> ошибка: запятая после дефиса

(N-N, число) -> ошибка: ожидалась запятая

(N-N, ,) -> S + вызов процедуры добавления нового диапазона в массив

(N-N, -) -> ошибка: число между двумя дефисами

Также следует рассмотреть поведение автомата, когда ему на вход поступает лексема "конец строки".


### 2. Разбор арифметических выражений

[Простой алгоритм разбора](https://youtu.be/t7dUy_wN-s4)